{"index.html":"<html><head><script src=\"https://cdn.syncfusion.com/ej2/dist/ej2.min.js\" type=\"text/javascript\"></script>\n    <link href=\"https://cdn.syncfusion.com/ej2/material.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\"><div class=\"control-section\">\n    <div class=\"content-wrapper\">\n        <div id=\"topToolbar\" style=\"top:0px\"></div>\n        <div id=\"magnificationToolbar\"></div>\n        <div id=\"pdfViewer\" style=\"height:640px; width:100%;\"></div>\n        <input type=\"file\" id=\"fileUpload\" accept=\".pdf\" style=\"display:block;visibility:hidden;width:0;height:0;\">\n        <div id=\"popup\"></div>\n        <div id=\"textSearchBox\">\n            <div id=\"searchContainer\">\n                <span class=\"e-input-group e-custom-search-input\">\n                    <input type=\"text\" id=\"searchInput\" placeholder=\"Find in document\" class=\"e-input\">\n                    <span class=\"e-input-group-icon e-pv-search-icon\" id=\"searchBtn\"></span>\n                </span>\n                <button id=\"previousSearch\" class=\"search-button\" style=\"margin-left:5px\"></button>\n                <button id=\"nextSearch\" class=\"search-button\"></button>\n            </div>\n            <div id=\"matchCaseContainer\" style=\"margin-top:8px\">\n                <input id=\"matchCase\" type=\"checkbox\">\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n\n","index.js":"{{ripple}}/*jshint esversion: 6 */\nvar inputTemplate = '<div class=\"\"><input type=\"text\" class=\"e-input-group e-pv-current-page-number\" id=\"currentPage\" /></div>';\nvar ele = '<div class=\"\"><span class=\"e-pv-total-page-number\" id=\"totalPage\">of 0</span></div>';\nvar isBookmarkOpen = false;\nvar isBookmarkClick = false;\nvar isBookmarkView = false;\nvar isTextSearchBoxOpen = false;\nvar bookmarkPopup;\nvar textSearchPopup;\nvar toolbarObj;\nvar viewer;\nvar currentPageBox;\nvar searchInput;\nvar searchButton;\nvar openDocument;\nvar matchCase = false;\nvar fileInputElement;\nvar filename;\nvar treeObj;\n\n    toolbarObj = new ej.navigations.Toolbar({\n        items: [\n            { prefixIcon: 'e-pv-open-document', tooltipText: 'Open', id: 'openButton', click: openClicked },\n            { prefixIcon: 'e-pv-bookmark-icon', tooltipText: 'Bookmark', id: 'bookmarkButton', click: bookmarkClicked },\n            { prefixIcon: 'e-pv-previous-page-navigation-icon', id: 'previousPage', tooltipText: 'Previous Page', align: 'Center', click: previousClicked.bind(this) },\n            { prefixIcon: 'e-pv-next-page-navigation-icon', id: 'nextPage', tooltipText: 'Next Page', align: 'Center', click: nextClicked.bind(this) },\n            { template: inputTemplate, tooltipText: 'Page Number', align: 'Center' },\n            { template: ele, tooltipText: 'Page Number', align: 'Center' },\n            { prefixIcon: 'e-pv-search-icon', tooltipText: 'Text Search', align: 'Right', click: searchClicked.bind(this) },\n            { prefixIcon: 'e-pv-print-document-icon', tooltipText: 'Print', align: 'Right', click: printClicked.bind(this) },\n            { prefixIcon: 'e-pv-download-document-icon', tooltipText: 'Download', align: 'Right', click: downloadClicked.bind(this) }\n        ]\n    });\n    toolbarObj.appendTo('#topToolbar');\n    var magnificationToolbar = new ej.navigations.Toolbar({\n        items: [\n            { prefixIcon: 'e-pv-fit-page-icon', id: 'fitPage', tooltipText: 'Fit to page', click: pageFitClicked.bind(this) },\n            { prefixIcon: 'e-pv-zoom-in-icon', id: 'zoomIn', tooltipText: 'Zoom in', click: zoomInClicked.bind(this) },\n            { prefixIcon: 'e-pv-zoom-out-icon' , id: 'zoomOut', tooltipText: 'Zoom out', click: zoomOutClicked.bind(this) },\n        ]\n    });\n    magnificationToolbar.appendTo('#magnificationToolbar');\n    viewer = new ej.pdfviewer.PdfViewer({\n        enableToolbar: false,\n        enableNavigationToolbar: false,\n        enableThumbnail: false,\n        documentPath: 'Hive_Succinctly.pdf',\n        serviceUrl: 'http://localhost:62728/api/pdfviewer'\n    });\n    ej.pdfviewer.PdfViewer.Inject(ej.pdfviewer.TextSelection, ej.pdfviewer.TextSearch, ej.pdfviewer.Print, ej.pdfviewer.Navigation, ej.pdfviewer.Magnification, ej.pdfviewer.BookmarkView, ej.pdfviewer.ThumbnailView, ej.pdfviewer.LinkAnnotation);\n    viewer.appendTo('#pdfViewer');\n    isBookmarkView = false;\n    document.getElementById('fileUpload').addEventListener('change', readFile, false);\n    currentPageBox = document.getElementById('currentPage');\n    currentPageBox.value = '1';\n    searchInput = document.getElementById('searchInput');\n    openDocument = document.getElementById('fileupload');\n    bookmarkPopup = new ej.popups.Dialog({\n        showCloseIcon: true, header: \"Bookmarks\", closeOnEscape: false, isModal: false, target: document.getElementById('pdfViewer'),\n        content: '<div class=\"e-pv-bookmarks\" id=\"bookmarkview\"></div>',\n        buttons: [{\n            buttonModel: {},\n        }], position: { X: 'left', Y: 'top' }, cssClass: 'e-bookmark-popup', beforeClose: function () {\n           isBookmarkOpen = false;\n        }\n    });\n    bookmarkPopup.appendTo('#popup');\n    textSearchPopup = new ej.popups.Dialog({\n        showCloseIcon: false, closeOnEscape: false, isModal: false, target: document.getElementById('pdfViewer'),\n        buttons: [{\n            buttonModel: {},\n        }], position: { X: 'right', Y: 'top' }, cssClass: 'e-text-search-popup',\n    });\n    textSearchPopup.appendTo('#textSearchBox');\n    var previousSearch = new ej.buttons.Button({ iconCss: 'e-pv-previous-search' });\n    previousSearch.appendTo('#previousSearch');\n    var nextSearch = new ej.buttons.Button({ iconCss: 'e-pv-next-search-btn' });\n    nextSearch.appendTo('#nextSearch');\n    var matchCaseCheck = new ej.buttons.CheckBox({ label: 'Match case', change: checkBoxChanged });\n    matchCaseCheck.appendTo('#matchCase');\n    viewer.pageChange = function (args) {\n        currentPageBox.value = viewer.currentPageNumber.toString();\n        updatePageNavigation();\n    };\n    viewer.documentLoad = function (args) {\n\n        document.getElementById('totalPage').textContent = 'of ' + viewer.pageCount;\n        updatePageNavigation();\n    };\n    searchButton = document.getElementById('searchBtn');\n    searchInput.addEventListener('focus', function () { searchInput.parentElement.classList.add('e-input-focus'); });\n    searchInput.addEventListener('blur', function () { searchInput.parentElement.classList.remove('e-input-focus'); });\n    searchInput.addEventListener('keypress', searchInputKeypressed);\n    document.getElementById('previousSearch').addEventListener('click', previousSearchClicked);\n    document.getElementById('nextSearch').addEventListener('click', nextSearchClicked);\n    searchButton.addEventListener('click', searchClickHandler);\n    currentPageBox.addEventListener('keypress', onCurrentPageBoxKeypress);\n    currentPageBox.addEventListener('click', onCurrentPageBoxClicked);\n    bookmarkPopup.hide();\n    textSearchPopup.hide();\n    enableNextButton(false);\n    enablePrevButton(false);\n};\nfunction previousClicked(args) {\n    hidePopups();\n    viewer.navigation.goToPreviousPage();\n}\nfunction hidePopups() {\n    isBookmarkOpen = false;\n    isTextSearchBoxOpen = false;\n    bookmarkPopup.hide();\n    textSearchPopup.hide();\n}\nfunction bookmarkClicked() {\n    textSearchPopup.hide();\n    if (!isBookmarkOpen) {\n        var bookmarkDetails = viewer.bookmark.getBookmarks();\n        if (bookmarkDetails.bookmarks) {\n            if (!isBookmarkView) {\n                var bookmarks = bookmarkDetails.bookmarks.bookMark;\n                treeObj = new ej.navigations.TreeView({\n                    fields: {\n                        dataSource: bookmarks,\n                        id: 'Id',\n                        child: 'Child',\n                        text: 'Title',\n                        hasChildren: 'HasChild',\n                    }, nodeSelected: nodeClick\n                });\n                isBookmarkView = true;\n                treeObj.appendTo('#bookmarkview');\n                ['mouseover', 'keydown'].forEach( (evt) => document.getElementById(\"bookmarkview\").addEventListener(evt, (event) => {\n                    setHeight(event.target); }));\n            }\n            bookmarkPopup.show();\n            isBookmarkOpen = true;\n            isBookmarkClick = true;\n        }\n        else {\n            toolbarObj.enableItems(document.getElementById('bookmarkButton'), false);\n            isBookmarkOpen = false;\n        }\n    }\n    else {\n        if (!isBookmarkClick) {\n            bookmarkPopup.show();\n            isBookmarkClick = true;\n        } else {\n            bookmarkPopup.hide();\n            isBookmarkClick = false;\n        }  \n    }\n}\nfunction nextClicked(args) {\n    hidePopups();\n    viewer.navigation.goToNextPage();\n}\nfunction searchClicked(args) {\n    bookmarkPopup.hide();\n    if (!isTextSearchBoxOpen) {\n        textSearchPopup.show();\n    }\n    else {\n        viewer.textSearch.cancelTextSearch();\n        textSearchPopup.hide();\n    }\n    isTextSearchBoxOpen = !isTextSearchBoxOpen;\n}\nfunction printClicked(args) {\n    hidePopups();\n    viewer.print.print();\n}\nfunction downloadClicked(args) {\n    hidePopups();\n    viewer.download();\n}\nfunction pageFitClicked(args) {\n    hidePopups();\n    viewer.magnification.fitToPage();\n    updateZoomButtons();\n    toolbarObj.enableItems(document.getElementById('fitPage'), false);\n}\nfunction zoomInClicked(args) {\n    hidePopups();\n    viewer.magnification.zoomIn();\n    updateZoomButtons();\n}\nfunction zoomOutClicked(args) {\n    hidePopups();\n    viewer.magnification.zoomOut();\n    updateZoomButtons();\n}\n\nfunction readFile(args) {\n    // tslint:disable-next-line\n    var upoadedFiles = args.target.files;\n    if (args.target.files[0] !== null) {\n        var uploadedFile = upoadedFiles[0];\n        filename = upoadedFiles[0].name;\n        if (uploadedFile) {\n            var reader = new FileReader();\n            reader.readAsDataURL(uploadedFile);\n            // tslint:disable-next-line\n            reader.onload = function (e) {\n                var uploadedFileUrl = e.currentTarget.result;\n                viewer.load(uploadedFileUrl, null);\n                currentPageBox.value = '1';\n                document.getElementById(\"bookmarkview\").innerHTML = \"\";\n                isBookmarkView = false;\n                isBookmarkOpen = false;\n                viewer.fileName = filename;\n            \n        }\n    }\n}\n\nfunction openClicked() {\n    document.getElementById('fileUpload').click();\n}\nfunction onCurrentPageBoxKeypress(event) {\n    if ((event.which < 48 || event.which > 57) && event.which !== 8 && event.which !== 13) {\n        event.preventDefault();\n        return false;\n    }\n    else {\n        var currentPageNumber = parseInt(currentPageBox.value);\n        if (event.which === 13) {\n            if (currentPageNumber > 0 && currentPageNumber <= viewer.pageCount) {\n                viewer.navigation.goToPage(currentPageNumber);\n            }\n            else {\n                currentPageBox.value = viewer.currentPageNumber.toString();\n            }\n        }\n        return true;\n    }\n}\nfunction onCurrentPageBoxClicked() {\n    currentPageBox.select();\n    currentPageBox.focus();\n}\nfunction updatePageNavigation() {\n    if (viewer.currentPageNumber === 1) {\n        toolbarObj.enableItems(document.getElementById('previousPage'), false);\n        toolbarObj.enableItems(document.getElementById('nextPage'), true);\n    }\n    else if (viewer.currentPageNumber === viewer.pageCount) {\n        toolbarObj.enableItems(document.getElementById('previousPage'), true);\n        toolbarObj.enableItems(document.getElementById('nextPage'), false);\n    }\n    else {\n        toolbarObj.enableItems(document.getElementById('previousPage'), true);\n        toolbarObj.enableItems(document.getElementById('nextPage'), true);\n    }\n}\nfunction updateZoomButtons() {\n    if (viewer.zoomPercentage <= 50) {\n        toolbarObj.enableItems(document.getElementById('zoomIn'), true);\n        toolbarObj.enableItems(document.getElementById('zoomOut'), false);\n        toolbarObj.enableItems(document.getElementById('fitPage'), true);\n    }\n    else if (viewer.zoomPercentage >= 400) {\n        toolbarObj.enableItems(document.getElementById('zoomIn'), false);\n        toolbarObj.enableItems(document.getElementById('zoomOut'), true);\n        toolbarObj.enableItems(document.getElementById('fitPage'), true);\n    }\n    else {\n        toolbarObj.enableItems(document.getElementById('zoomIn'), true);\n        toolbarObj.enableItems(document.getElementById('zoomOut'), true);\n        toolbarObj.enableItems(document.getElementById('fitPage'), true);\n    }\n}\nfunction nodeClick(args) {\n    var bookmarksDetails = viewer.bookmark.getBookmarks();\n    setHeight(args.node);\n    var bookmarksDestination = bookmarksDetails.bookmarksDestination;\n    var bookid = Number(args.nodeData.id);\n    var pageIndex = bookmarksDestination.bookMarkDestination[bookid].PageIndex;\n    var Y = bookmarksDestination.bookMarkDestination[bookid].Y;\n    viewer.bookmark.goToBookmark(pageIndex, Y);\n    return false;\n}\n// tslint:disable-next-line\nfunction setHeight(element) {\n    if (treeObj.fullRowSelect) {\n        if (element.classList.contains('e-treeview')) {\n            element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\n        }\n        else if (element.classList.contains('e-list-parent')) {\n            element = element.querySelector('.e-fullrow');\n        }\n        else if (element.classList.value !== ('e-fullrow') && element.closest('.e-list-item')) {\n            element = element.closest('.e-list-item').querySelector('.e-fullrow');\n        }\n        if (element.nextElementSibling) {\n            element.style.height = element.nextElementSibling.offsetHeight + 'px';\n        }\n    }\n}\nfunction searchInputKeypressed(event) {\n    enablePrevButton(true);\n    enableNextButton(true);\n    if (event.which === 13) {\n        initiateTextSearch();\n        updateSearchInputIcon(false);\n    }\n}\nfunction searchClickHandler() {\n    if (searchButton.classList.contains('e-pv-search-icon')) {\n        viewer.textSearch.cancelTextSearch();\n        initiateTextSearch();\n    }\n    else if (searchButton.classList.contains('e-pv-search-close')) {\n        searchInput.value = '';\n        searchInput.focus();\n        viewer.textSearch.cancelTextSearch();\n    }\n}\nfunction initiateTextSearch() {\n    var searchString = searchInput.value;\n    viewer.textSearch.searchText(searchString, matchCase);\n}\nfunction previousSearchClicked() {\n    var searchString = searchInput.value;\n    if (searchString) {\n        viewer.textSearch.searchPrevious();\n    }\n}\nfunction nextSearchClicked() {\n    var searchString = searchInput.value;\n    if (searchString) {\n        viewer.textSearch.searchNext();\n    }\n}\nfunction checkBoxChanged(args) {\n    if (args.checked) {\n        matchCase = true;\n    }\n    else {\n        matchCase = false;\n    }\n    initiateTextSearch();\n}\nfunction enablePrevButton(isEnable) {\n    var previousSearchButton = document.getElementById('previousSearch');\n    if (isEnable) {\n        previousSearchButton.removeAttribute('disabled');\n    }\n    else {\n        previousSearchButton.disabled = true;\n    }\n}\nfunction enableNextButton(isEnable) {\n    var nextSearchButton = document.getElementById('nextSearch');\n    if (isEnable) {\n        nextSearchButton.removeAttribute('disabled');\n    }\n    else {\n        nextSearchButton.disabled = true;\n    }\n}\nfunction updateSearchInputIcon(isEnable) {\n    if (isEnable) {\n        searchButton.classList.remove('e-pv-search-close');\n        searchButton.classList.add('e-pv-search-icon');\n    }\n    else {\n        searchButton.classList.remove('e-pv-search-icon');\n        searchButton.classList.add('e-pv-search-close');\n    }\n}\n\n\n"}